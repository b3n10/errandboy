"use strict";var cb_nighttime=document.getElementById("cb_nighttime"),tx_distance=document.getElementById("tx_distance"),tx_stop=document.getElementById("tx_stop"),bt_stopplus=document.getElementById("bt_stopplus"),bt_stopminus=document.getElementById("bt_stopminus"),result=document.getElementsByClassName("result")[0],bt_copy=document.getElementById("bt_copy"),day_fee="55.0",day_remfee="15",night_fee="65.0",night_remfee="20",errand_fee=day_fee,rem_fee=day_remfee,stop_fee=20,stops=Number(tx_stop.value),fields=[{label:"First 3km:",value:day_fee},{label:"Remaining KM:",value:0},{label:"Errand Fee:",value:errand_fee}],stopover=function(){event.currentTarget===bt_stopplus?tx_stop.value=stops+=1:0<stops&&(tx_stop.value=--stops),fields.filter(function(e){return e.label.includes("Stop")}).length||fields.push({label:"Stop Over",value:0}),0===stops&&(fields=fields.filter(function(e){return!e.label.includes("Stop")})),calculate()},generate_fields=function(){for(;result.firstChild;)result.removeChild(result.firstChild);fields.forEach(function(e){var t=document.createElement("div"),l=document.createElement("label"),n=document.createElement("label");l.innerHTML=e.label,n.innerHTML=e.value,t.className="estimates",t.append(l),t.append(n),result.append(t)})},calculate=function(){var e,t=Number(tx_distance.value),l=0,n=0,a=fields.filter(function(e){return e.label.includes("First")})[0],r=fields.filter(function(e){return e.label.includes("Remaining")})[0],i=fields.filter(function(e){return e.label.includes("Errand")})[0],u=fields.filter(function(e){return e.label.includes("Stop")})[0],s=fields.filter(function(e){return e.label.includes("Total")})[0];3<t?(l=Number(a.value),r.label="Remaining KM (".concat((t-3).toFixed(1),"x").concat(rem_fee,"):"),n=parseFloat((t-3)*Number(rem_fee)).toFixed(1),r.value=n,e=(Number(l)+Number(n)).toFixed(1),i.value=e):(r.label="Remaining KM:",r.value=0,i.value=errand_fee),u&&(u.value=(stops*stop_fee).toFixed(1),fields.filter(function(e){return e.label.includes("Total")}).length?s&&(s.value=(Number(u.value)+Number(e||errand_fee)).toFixed(1)):fields.push({label:"Total Delivery Cost:",value:(Number(u.value)+Number(e||errand_fee)).toFixed(1)})),u||(fields=fields.filter(function(e){return!e.label.includes("Total")})),generate_fields()},copyText=function(){var t="".concat(tx_distance.value?tx_distance.value+"km":"within 3km"," distance\n\n");fields.forEach(function(e){return t+="".concat(e.label," ").concat(e.value,"\n")});var e=document.createElement("textarea");document.getElementsByTagName("body")[0].append(e),e.value=t,e.select(),document.execCommand("copy"),e.remove()};cb_nighttime.onclick=function(){event.currentTarget.checked?(errand_fee=night_fee,rem_fee=night_remfee,fields.filter(function(e){return e.label.includes("First")})[0].value=errand_fee):(errand_fee=day_fee,rem_fee=day_remfee,fields.filter(function(e){return e.label.includes("First")})[0].value=errand_fee),calculate()},bt_stopminus.onclick=stopover,bt_stopplus.onclick=stopover,tx_distance.addEventListener("input",calculate),bt_copy.onclick=copyText,window.onload=function(){return generate_fields()};