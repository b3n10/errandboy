"use strict";var cb_nighttime=document.getElementById("cb_nighttime"),cb_holiday=document.getElementById("cb_holiday"),tx_distance=document.getElementById("tx_distance"),tx_stop=document.getElementById("tx_stop"),bt_stopplus=document.getElementById("bt_stopplus"),bt_stopminus=document.getElementById("bt_stopminus"),result=document.getElementsByClassName("result")[0],bt_copy=document.getElementById("bt_copy"),day_fee="55.0",day_remfee="15",night_fee="65.0",night_remfee="20",errand_fee=day_fee,rem_fee=day_remfee,stop_fee=20,stops=Number(tx_stop.value),fields=[{label:"First 3km:",value:day_fee},{label:"Remaining KM:",value:0},{label:"Errand Fee:",value:errand_fee}],nighttime=function(){rem_fee=event.currentTarget.checked?(fields.filter(function(e){return e.label.includes("First")})[0].value=errand_fee=night_fee,night_remfee):(fields.filter(function(e){return e.label.includes("First")})[0].value=errand_fee=day_fee,day_remfee),calculate()},holiday=function(){event.currentTarget.checked?(fields.splice(3,0,{label:"Holiday Surcharge (50%):",value:0}),fields.filter(function(e){return e.label.includes("Total")}).length||fields.push({label:"Total Delivery Cost:",value:0})):(fields=fields.filter(function(e){return!e.label.includes("Holiday")})).filter(function(e){return e.label.includes("Stop")}).length||(fields=fields.filter(function(e){return!e.label.includes("Total")})),calculate()},stopover=function(){event.currentTarget===bt_stopplus?tx_stop.value=stops+=1:0<stops&&(tx_stop.value=--stops),fields.filter(function(e){return e.label.includes("Stop")}).length||fields.splice(4,0,{label:"Stop Over",value:0}),fields.filter(function(e){return e.label.includes("Total")}).length||fields.push({label:"Total Delivery Cost:",value:0}),0===stops&&((fields=fields.filter(function(e){return!e.label.includes("Stop")})).filter(function(e){return e.label.includes("Holiday")}).length||(fields=fields.filter(function(e){return!e.label.includes("Total")}))),calculate()},generate_fields=function(){for(;result.firstChild;)result.removeChild(result.firstChild);fields.forEach(function(e){var t=document.createElement("div"),l=document.createElement("label"),n=document.createElement("label");l.innerHTML=e.label,n.innerHTML=e.value,t.className="estimates",t.append(l),t.append(n),result.append(t)})},calculate=function(){var e,t=Number(tx_distance.value),l=0,n=0,i=fields.filter(function(e){return e.label.includes("First")})[0],a=fields.filter(function(e){return e.label.includes("Remaining")})[0],r=fields.filter(function(e){return e.label.includes("Errand")})[0],u=fields.filter(function(e){return e.label.includes("Stop")})[0],c=fields.filter(function(e){return e.label.includes("Holiday")})[0],o="";3<t?(l=Number(i.value),a.label="Remaining KM (".concat((t-3).toFixed(1),"x").concat(rem_fee,"):"),n=parseFloat((t-3)*Number(rem_fee)).toFixed(1),a.value=n,e=(Number(l)+Number(n)).toFixed(1),r.value=e):(a.label="Remaining KM:",a.value=0,r.value=errand_fee),u&&(u.value=(stops*stop_fee).toFixed(1)),c&&(c.value=(.5*Number(e||errand_fee).toFixed(1)).toFixed(2));var d=u?u.value:0,s=c?c.value:0,f=e||errand_fee;(o=fields.filter(function(e){return e.label.includes("Total")})).length&&(o[0].value=(Number(d)+Number(s)+Number(f)).toFixed(2)),generate_fields()},copyText=function(){var t="".concat(tx_distance.value?tx_distance.value+"km":"within 3km"," distance\n\n");fields.forEach(function(e){return t+="".concat(e.label," ").concat(e.value,"\n")});var e=document.createElement("textarea");document.getElementsByTagName("body")[0].append(e),e.value=t,e.select(),document.execCommand("copy"),e.remove()};cb_nighttime.onclick=nighttime,cb_holiday.onclick=holiday,bt_stopminus.onclick=stopover,bt_stopplus.onclick=stopover,tx_distance.addEventListener("input",calculate),bt_copy.onclick=copyText,window.onload=function(){return generate_fields()};